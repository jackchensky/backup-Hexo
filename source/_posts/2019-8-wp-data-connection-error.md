---
title: 关于Wordpress数据库连接时出错的解决方法
date: 2019-08-26 01:06:39
categories: wordpress
tags: wordpress
---

![wordpress 数据库连接出错](http://img.jackchen.cn/bridge-wallpaper-1600x900.jpg)
## 前言
> Blog网站搬迁到新的服务器上一直还可以，上个月有一天突然网站打开跳出个“建立数据库连接错误”几个大字...一脸懵逼的我，脑子突然闪过——网站数据库被黑了！！！5秒后我发现这个可能性几乎为零，毕竟没哪个黑客无聊到去黑一个个人小博客😁，篡改数据库配置文件什么的！自作多情之后一起来分析下其他的可能性...

## 分析
遇到问题最好的办法当然是Google，经过一番搜索，有关WordPress建立数据库连接时出错的原因有很多：
> * 数据库配置文件被篡改。（这种几率很小刚也说过了，除非被黑客入侵篡改过）；
> * 数据库服务器的问题，服务未启动或者其他的一些数据库故障；
> * 最重要的一个原因，wp_options表需要修复。

<!--more-->
发现最有可能的还是wp_options这个数据库的表有问题，需要修复。很多童鞋也有反应，不知道为什么wordpress运行一段时间后就会出现这样的问题。由于我网站是搬迁到了新的服务器，当时搬迁的原因主要是之前的服务器里的阿里云OS版本太低了，不想折腾，直接去开了台新的阿里云服务器，之前的就不用了。然后随便把WordPress版本升级为最新的版本，也可能新版本和老版本还是有一些兼容性的问题。嗯，那么如果wp-options这个表的问题最大，那么要如何修复呢！

## 解决方法
#### 方法一：
使用phpmyadmin到后台去直接修复这个表，进入phpmyadmin后直接找到这个表，然后在前面勾选，在操作里选择`修复表`；
#### 方法二：
也可以在wp-config.php中增加一句代码：
```
define(‘WP_ALLOW_REPAIR’, true);
```
然后直接访问后台 `http://www.youdomain.com/wp-admin/`，再按照wordpress的修复步骤操作即可。

## 总结
当然，为了你的网站安全，你完全可以先把数据库的密码修改成新的，防止真的有无聊的黑客逗你玩 😆 ...
